<nav>
  {{#each sections as section}}
    <a
      on:click="select(event, section)"
      href="{{section.url}}"
      class="{{section.active}}">
      {{section.name}}
    </a>
  {{/each}}
</nav>

<script>
  class Section {
    constructor (url, name) {
      this.url = url
      this.name = name
      this.setActive()
    }
    setActive() {
      this.active = location.pathname === this.url ?
        'active' : ''
    }
  }
  export default {
    onrender () {
      document.querySelector('title').innerText = 'AMP ' + this.get('active')
    },

    data() {
      const sections = [
        new Section('/', 'Home'),
        new Section('/stacks/', 'Stacks'),
        new Section('/topics/', 'Topics'),
        new Section('/stackEdit/', 'StackEdit'),
      ]
      const active = sections.reduce((a, s)=> a || (s.active ? s.name : false), false)
      return {
        active,
        sections,
      }
    },
    methods: {
      select(event, section) {
        history.pushState({}, section.name, section.url)
        event.preventDefault()
        const sections = this.get('sections')
        for (const section of sections) {
          section.setActive()
        }
        const active = sections.reduce((a, s)=> a || (s.active ? s.name : false), false)
        document.querySelector('title').innerText = 'AMP ' + active
        this.set({ active, sections})
      }
    }
  }
</script>

<style>
  nav {
    padding: 0.5em;
    background-color: var(--c-focus);
  }
  a {
    color: #eee;
    text-decoration: none;
    padding: 0.5em 2em;
    filter: saturate(0.5) opacity(.8);
    transition: filter 2s, background-color 0.2s;
  }
  a:hover, a:focus, a.active {
    background-color: var(--c-comment);
    filter: saturate(0.8) opacity(.9);
    transition: filter 0.2s, background-color 0s;
  }
  a.active {
    filter: none;
  }
</style>
